[gd_scene load_steps=16 format=2]

[ext_resource path="res://Assets/asset package custom/retro medieval 3d/Models/GLTF format/bricks.material" type="Material" id=1]
[ext_resource path="res://Entities/Wooden/WoodGolem.tscn" type="PackedScene" id=2]
[ext_resource path="res://Entities/Player.tscn" type="PackedScene" id=3]
[ext_resource path="res://Tutorial.gd" type="Script" id=4]
[ext_resource path="res://Entities/InteractableObjects/KnifeKinematic.tscn" type="PackedScene" id=5]
[ext_resource path="res://Entities/Wooden/WoodGolemBase.tscn" type="PackedScene" id=6]
[ext_resource path="res://Entities/Wooden/ArmBase.tscn" type="PackedScene" id=7]
[ext_resource path="res://Entities/TemporaryObjects/PortalSphere.tscn" type="PackedScene" id=8]
[ext_resource path="res://Entities/Wooden/WallGear.tscn" type="PackedScene" id=9]
[ext_resource path="res://Entities/Wooden/GateBase.tscn" type="PackedScene" id=10]
[ext_resource path="res://Assets/asset package custom/retro medieval 3d/Models/GLTF format/planks.material" type="Material" id=11]
[ext_resource path="res://Assets/asset package custom/kenneyretrourban/Models/GLTF format/metal.material" type="Material" id=12]
[ext_resource path="res://Assets/asset package custom/kenneyretrourban/Models/GLTF format/asphalt.material" type="Material" id=13]

[sub_resource type="CapsuleShape" id=1]
radius = 0.163404
height = 1.31347

[sub_resource type="BoxShape" id=2]
extents = Vector3( 2, 0.1, 0.3 )

[node name="Tutorial" type="Spatial"]
script = ExtResource( 4 )

[node name="Rooms" type="CSGCombiner" parent="."]
use_collision = true

[node name="FirstRoom" type="CSGCylinder" parent="Rooms"]
invert_faces = true
radius = 6.0
height = 5.0
sides = 6
material = ExtResource( 1 )

[node name="WoodGolem2" parent="Rooms/FirstRoom" instance=ExtResource( 6 )]
transform = Transform( 0.326341, -0.399519, 0.856671, 0.512047, 0.836516, 0.19506, -0.79455, 0.375, 0.477562, -2.69435, -1.3472, 4.75939 )

[node name="SpareArm" type="KinematicBody" parent="Rooms/FirstRoom"]
transform = Transform( 0.392401, -0.919794, 0, 0, 0, -1, 0.919794, 0.392401, 0, 0.262633, -0.911916, 4.7886 )

[node name="ArmBase" parent="Rooms/FirstRoom/SpareArm" instance=ExtResource( 7 )]

[node name="CollisionShape" type="CollisionShape" parent="Rooms/FirstRoom/SpareArm"]
transform = Transform( 1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, -0.74411, 0 )
shape = SubResource( 1 )

[node name="WallGear" parent="Rooms/FirstRoom" instance=ExtResource( 9 )]
transform = Transform( 0.985429, -0.170089, 0, 0.170089, 0.985429, 0, 0, 0, 1, 2.40702, -1.75014, -5.08509 )

[node name="TableBlock" type="CSGCylinder" parent="Rooms/FirstRoom"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -2.3763, -2.24645, 4.27178 )
operation = 2
invert_faces = true
material = ExtResource( 12 )

[node name="WoodCarve" type="CSGBox" parent="Rooms/FirstRoom/TableBlock"]
transform = Transform( 0.965199, 0, 0.261515, 0, 1, 0, -0.261515, 0, 0.965199, 0.481092, 0.641921, 0 )
invert_faces = true
width = 0.3
height = 0.25
depth = 0.6
material = ExtResource( 11 )

[node name="CSGCylinder" type="CSGCylinder" parent="Rooms/FirstRoom/TableBlock/WoodCarve"]
transform = Transform( 1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0.000217199, 0.0780739, -0.118008 )
operation = 2
invert_faces = true
radius = 0.180292
height = 0.377524
material = ExtResource( 11 )

[node name="CSGSphere" type="CSGSphere" parent="Rooms/FirstRoom/TableBlock/WoodCarve/CSGCylinder"]
transform = Transform( 1, 0, 0, 0, 2, 0, 0, 0, 1, 0, -0.182324, -0.113709 )
operation = 2
invert_faces = true
radius = 0.1
material = ExtResource( 11 )

[node name="WoodBlock" type="CSGBox" parent="Rooms/FirstRoom"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 1.15151, -1.77879, 4.55643 )
operation = 2
invert_faces = true
height = 1.45145
depth = 1.18356
material = ExtResource( 11 )

[node name="SpareArm2" type="KinematicBody" parent="Rooms/FirstRoom"]
transform = Transform( 0.392401, -0.919794, 0, 0, 0, -1, 0.919794, 0.392401, 0, 2.43333, -2.3988, 3.47127 )

[node name="ArmBase" parent="Rooms/FirstRoom/SpareArm2" instance=ExtResource( 7 )]

[node name="CollisionShape" type="CollisionShape" parent="Rooms/FirstRoom/SpareArm2"]
transform = Transform( 1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, -0.74411, 0 )
shape = SubResource( 1 )

[node name="SpareArm3" type="KinematicBody" parent="Rooms/FirstRoom"]
transform = Transform( -0.368872, -0.787283, -0.494084, 0.929436, -0.307234, -0.204342, 0.00907561, -0.534595, 0.845059, 2.35865, -2.3988, 2.68731 )

[node name="ArmBase" parent="Rooms/FirstRoom/SpareArm3" instance=ExtResource( 7 )]

[node name="CollisionShape" type="CollisionShape" parent="Rooms/FirstRoom/SpareArm3"]
transform = Transform( 1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, -0.74411, 0 )
shape = SubResource( 1 )

[node name="SpareArm4" type="KinematicBody" parent="Rooms/FirstRoom"]
transform = Transform( -0.458867, 0.888505, 0, 0, 0, -1, -0.888505, -0.458867, 0, 3.14667, -2.3988, 2.89176 )

[node name="ArmBase" parent="Rooms/FirstRoom/SpareArm4" instance=ExtResource( 7 )]

[node name="CollisionShape" type="CollisionShape" parent="Rooms/FirstRoom/SpareArm4"]
transform = Transform( 1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, -0.74411, 0 )
shape = SubResource( 1 )

[node name="FirstHall" type="CSGBox" parent="Rooms"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0996002, -0.961474, -10.1015 )
invert_faces = true
width = 4.0
height = 3.0
depth = 10.0
material = ExtResource( 1 )

[node name="GateSpace" type="CSGBox" parent="Rooms/FirstHall"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.46201, 4.57046 )
invert_faces = true
width = 4.2
height = 6.5
depth = 0.4
material = ExtResource( 1 )

[node name="Gate" parent="Rooms/FirstHall/GateSpace" instance=ExtResource( 10 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.47116, 0 )

[node name="Closed_stop" type="Area" parent="Rooms/FirstHall/GateSpace"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -3.12669, 0.0448127 )

[node name="CollisionShape" type="CollisionShape" parent="Rooms/FirstHall/GateSpace/Closed_stop"]
shape = SubResource( 2 )

[node name="Open_stop" type="Area" parent="Rooms/FirstHall/GateSpace"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3.13363, 0 )

[node name="CollisionShape" type="CollisionShape" parent="Rooms/FirstHall/GateSpace/Open_stop"]
shape = SubResource( 2 )

[node name="SecondHall" type="CSGBox" parent="Rooms"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.966957, -15.7944 )
invert_faces = true
width = 10.0
height = 3.0
depth = 4.0
material = ExtResource( 1 )

[node name="GolemChambertest" type="CSGCylinder" parent="Rooms/SecondHall"]
transform = Transform( 0.866025, 0, -0.5, 0, 1, 0, 0.5, 0, 0.866025, -8.6738, 2.49429, 0 )
invert_faces = true
radius = 4.51172
height = 8.0
sides = 6
material = ExtResource( 1 )

[node name="Player" parent="." instance=ExtResource( 3 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.0493605, 0.720241 )

[node name="WoodGolem" parent="." instance=ExtResource( 2 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -9.03182, -0.494598, -16.1457 )

[node name="KnifeKinematic" parent="." instance=ExtResource( 5 )]
transform = Transform( -0.205641, 0.978628, 0, -0.978628, -0.205641, 0, 0, 0, 1, 2.02718, -1.85692, -5.02855 )

[node name="PortalSphere" parent="." instance=ExtResource( 8 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.193988, 0.53014 )

[node name="Gearbox" type="CSGBox" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 2.46769, -2.24007, -5.04693 )
use_collision = true
width = 1.0
height = 0.7
depth = 0.4
material = ExtResource( 1 )

[node name="CSGBox" type="CSGBox" parent="Gearbox"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.26989, 0 )
operation = 2
width = 0.85
height = 0.2
depth = 0.25
material = ExtResource( 13 )

[node name="Gearbox2" type="CSGBox" parent="."]
transform = Transform( -4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 1.79435, -2.24007, -7.80407 )
use_collision = true
width = 1.0
height = 0.7
depth = 0.4
material = ExtResource( 1 )

[node name="CSGBox" type="CSGBox" parent="Gearbox2"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.26989, 0 )
operation = 2
width = 0.85
height = 0.2
depth = 0.25
material = ExtResource( 13 )

[node name="WallGear2" parent="Gearbox2" instance=ExtResource( 9 )]
transform = Transform( 0.985429, -0.170089, 0, 0.170089, 0.985429, 0, 0, 0, 1, -0.0606713, 0.489926, -0.0381637 )

[connection signal="lower" from="Rooms/FirstRoom/WallGear" to="Rooms/FirstHall/GateSpace/Gate" method="_on_WallGear_lower"]
[connection signal="raise" from="Rooms/FirstRoom/WallGear" to="Rooms/FirstHall/GateSpace/Gate" method="_on_WallGear_raise"]
[connection signal="sister" from="Rooms/FirstRoom/WallGear" to="Gearbox2/WallGear2" method="_on_WallGear_sister"]
[connection signal="stopped" from="Rooms/FirstHall/GateSpace/Gate" to="Rooms/FirstRoom/WallGear" method="_on_Gate_stopped"]
[connection signal="stopped" from="Rooms/FirstHall/GateSpace/Gate" to="Gearbox2/WallGear2" method="_on_Gate_stopped"]
[connection signal="body_entered" from="Rooms/FirstHall/GateSpace/Closed_stop" to="Rooms/FirstHall/GateSpace/Gate" method="_on_Closed_stop_body_entered"]
[connection signal="body_entered" from="Rooms/FirstHall/GateSpace/Open_stop" to="Rooms/FirstHall/GateSpace/Gate" method="_on_Open_stop_body_entered"]
[connection signal="jam" from="KnifeKinematic" to="Rooms/FirstRoom/WallGear" method="_on_KnifeKinematic_jam"]
[connection signal="knife_pickup" from="KnifeKinematic" to="Rooms/FirstRoom/WallGear" method="_on_KnifeKinematic_knife_pickup"]
[connection signal="lower" from="Gearbox2/WallGear2" to="Rooms/FirstHall/GateSpace/Gate" method="_on_WallGear_lower"]
[connection signal="raise" from="Gearbox2/WallGear2" to="Rooms/FirstHall/GateSpace/Gate" method="_on_WallGear_raise"]
[connection signal="sister" from="Gearbox2/WallGear2" to="Rooms/FirstRoom/WallGear" method="_on_WallGear2_sister"]
